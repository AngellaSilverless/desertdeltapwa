function zoom(e){var t,i,o,n,a=$(".activePage .page-scale-wrap"),s=$("body"),l=a.length?a:$("#container"),d=void 0!==window.scaleLayoutFunc,c=window.scrollX,r=window.scrollY;switch(e){case"in":s.addClass("zoomed").redraw();10<(t=(i=parseFloat(getCurrentScale(l[0],!0)))+(.9<i?1:i))&&(t=10),d?window.scaleLayoutFunc(!1,t):flip?window.scaleFlipLayout(!1,t):l.css(prefix.css+"transform","scale("+t+","+t+")").css(prefix.css+"transform-origin","0 0 0");break;case"out":s.removeClass("zoomed"),minScale=d?window.scaleLayoutFunc(!0):1,(t=(i=parseFloat(getCurrentScale(l[0],!0)))-1)<minScale+.1&&(t=minScale,n=!0),s.addClass("zoomed"),d?window.scaleLayoutFunc(!1,t):flip?window.scaleFlipLayout(!1):l.css(prefix.css+"transform","scale("+t+","+t+")").css(prefix.css+"transform-origin","0 0 0");break;default:return!1}o=t/i,window.scrollTo(c*o,r*o),n&&s.removeClass("zoomed")}function initDrag(e,t){if(touchEnabled){var o,n,a,s,i=$(e),l=t?$(t):i;i.mousedown(function(e){e.preventDefault(),s=!0,o=e.pageX,n=e.pageY,a=l.scrollLeft(),sTop=l.scrollTop()}),$(window).mousemove(function(e){if(s){var t=e.pageX,i=e.pageY;l.scrollLeft(a-t+o),l.scrollTop(sTop-i+n),beenDragged=!0,$("html").addClass("dragging")}}).mouseup(function(e){s&&(s=!1,setTimeout(function(){beenDragged=!1,$("html").removeClass("dragging")},1))})}}function removeDrag(){$("html,body").removeClass("zoomed").scrollTop(0).scrollLeft(0).off("mousedown"),$(window).off("mousemove")}$(function(){if(!$("body").hasClass("webapp-instructions")){for(var e,i=!1,t=' xmlns="http://www.w3.org/2000/svg"',o={toc:{title:"Go to Table of Contents",enabled:viewOpts.toc,action:function(){nav.to(viewOpts.toc)},html:'<svg viewBox="0 0 48 48"'+t+'><path d="M0 0h48v48H0z" fill="none"/><path d="M6 36h36v-4H6v4zm0-10h36v-4H6v4zm0-14v4h36v-4H6z"/></svg>'},thumbs:{title:"Toggle page thumbnails",action:function(){L()},enabled:viewOpts.thumbs,html:'<svg viewBox="0 0 32 32"'+t+'><path d="M4 4h6v6H4zm9 0h6v6h-6zm9 0h6v6h-6zM4 13h6v6H4zm9 0h6v6h-6zm9 0h6v6h-6zM4 22h6v6H4zm9 0h6v6h-6zm9 0h6v6h-6z"/></svg>'},id:"opt-thumbs-btn",zoomin:{title:"Zoom in",enabled:viewOpts.zoom,id:"opt-zoom-in-btn",class:"hideFS",action:function(){zoom("in")},html:'<svg viewBox="0 0 24 24"'+t+'><path d="M9 9V6h1v3h3v1h-3v3H9v-3H6V9h3zm7.5 5.4c1-1.4 1.5-3 1.5-5C18 5 14.2 1 9.5 1S1 4.8 1 9.5 4.8 18 9.5 18c1.8 0 3.5-.6 5-1.5l6.2 6.3h.4l2-1.8v-.3l-6-6.3zm-7 1.6C13 16 16 13 16 9.5S13 3 9.5 3 3 6 3 9.5 6 16 9.5 16z" fill-rule="evenodd"/></svg>'},zoomout:{title:"Zoom out",enabled:viewOpts.zoom,id:"opt-zoom-out-btn",class:"hideFS",action:function(){zoom("out")},html:'<svg viewBox="0 0 24 24"'+t+'><path d="M16.5 14.4c1-1.4 1.5-3 1.5-5C18 5 14.2 1 9.5 1S1 4.8 1 9.5 4.8 18 9.5 18c1.8 0 3.5-.6 5-1.5l6.2 6.3h.4l2-1.8v-.3l-6-6.3zm-7 1.6C13 16 16 13 16 9.5S13 3 9.5 3 3 6 3 9.5 6 16 9.5 16zM6 9v1h7V9H6z" fill-rule="evenodd"/></svg>'},fullscreen:{title:"Toggle fullscreen",enabled:viewOpts.fs&&fullscreenEnabled(),id:"opt-fs-btn",action:function(){toggleFullScreen()},html:"<svg"+t+' viewBox="0 0 48 48"><path d="M7 38.3h34V11H7v27.3zm-3.6-31h10.3V4H0v13.7h3.4V7.4zm0 24H0V45h13.7v-3H3.4V31.4zM34.4 4v3.4h10.2v10.3H48V4H34.3zm10.2 37.7H34.3V45H48V31.5h-3.4v10.3z"/></svg>'},pdf:{title:"Download PDF version",enabled:viewOpts.pdf,action:function(e){window.trackButtonClick&&window.trackButtonClick(e),window.open(viewOpts.pdf,"_blank")},html:'<svg viewBox="0 0 48 48"'+t+'><path d="M0 0h48v48H0z" fill="none"/><path d="M38.7 20C37.3 13.3 31.3 8 24 8c-5.8 0-10.8 3.3-13.3 8C4.7 16.8 0 22 0 28c0 6.6 5.4 12 12 12h26c5.5 0 10-4.5 10-10 0-5.3-4-9.6-9.3-10zM34 26L24 36 14 26h6v-8h8v8h6z"/></svg>'},in5:{title:"Built with in5",enabled:viewOpts.footer,action:function(e){window.open($("#in5footer a").attr("href"),"_blank")},html:'<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 48 47.8"><defs><style>.cls-1{fill:#e34f26;}</style></defs><path d="M0 0l4.4 43L24 48l19.6-5L48 0zm8.4 11.4l7-3.3v6.4l-7 3.3zm30 5.7v12l-6 5.5V17a1.7 1.7 0 0 1 0-.2 3 3 0 0 0-.7-2c-.6-.6-1.5-.7-3-.7-1.3 0-2.3.4-3 1a3 3 0 0 0-.5 2h.2v9c0 .4-.2.5-.2.5a8 8 0 0 1-8 7.6 8 8 0 0 1-7.2-4 11 11 0 0 1-1.4-3.6s-.2 0-.2-.2V21l7-3.2V26a1.8 1.8 0 0 0 .3.8c0 .2.3.6 1.3.6s1-.3 1.2-.6a2 2 0 0 0 .2-1V17a10.5 10.5 0 0 1 2.7-7 10.3 10.3 0 0 1 8-3 9.4 9.4 0 0 1 7.5 3c2.5 2.7 2.2 6.2 2.2 7z"/></svg>',init:function(){$("#in5footer").hide()}}},n=$('<div id="viewer-options-bar"><span id="viewer-title"><span id="viewer-logo"></span></span><span id="viewer-pagecount"></span><span id="viewer-options"></span></div>').css("background-color",viewOpts.bg).addClass(function(e){3===(e=e.split("#").pop()).length&&(e+=e);var t=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16);return 156<.3*t+.59*i+.114*o?"light":"dark"}(viewOpts.bg)),a=$('<div id="viewer-options-wrap" class="collapsed">'),s=$('<div id="viewer-options-thumb-images"></div>'),l=$('<div id="viewer-thumb-wrap"></div>').append(s),d=1,c=o.thumbs.enabled?nav.numPages:0;d<=c;d++)(e=$('<div class="viewer-page-thumb"><img title="page '+d+'" alt="page '+d+'" src="assets/images/pagethumb_'+(1e-4*d).toFixed(4).substr(2)+'.jpg"/></div>'))[0].pageIndex=d,e.on(clickEv,function(e){i||(nav.to(this.pageIndex),L())}),s.append(e);var r=l.hide().find("img").on("dragstart",function(e){e.preventDefault()});c&&fitTallToWidth&&r.first().one("load",function(){try{r.css({"max-height":this.naturalHeight,"min-width":this.naturalWidth,"object-fit":"cover","object-position":"top left"})}catch(e){}}),a.append(l),$progbar=$("<div id='viewer_progress_bar'> </div>"),viewOpts.progress&&(multifile||$progbar.css({"-webkit-transition":".5s width",transition:".5s width"}),a.append($progbar),y(getStartPage())),a.append(n);var v=a.find("#viewer-logo"),p=a.find("#viewer-title"),g=a.find("#viewer-pagecount"),h=a.find("#viewer-options");if(p.append(viewOpts.title?document.title:""),viewOpts.page||g.hide(),viewOpts.logo){var w="";switch(viewOpts.logo.split(".").pop()){case"png":w=$("<img src='"+viewOpts.logo+"' alt='logo' />");break;case"svg":w=$("<object data='"+viewOpts.logo+"' alt='logo' type='image/svg+xml'></object>")}v.append(w),w.load(function(e){v.width(w.width())})}else v.hide();g.text(k());var u,m,f,b,z=0;for(u in o)(m=o[u]).enabled&&(z++,b="viewer-option-btn"+(m.class?" "+m.class:""),f=$('<div class="'+b+'" title="'+m.title+'" name="'+m.title+'">'+m.html+"</div>"),m.id&&f.attr("id",m.id),h.append(f),f[0].clickAction=m.action,f.on(clickEv,function(e){this.clickAction(e)}),m.init&&m.init());z||viewOpts.title||viewOpts.page||a.addClass("no-options");var C,x,O,H=$('<span id="view-toggle" style="background:'+viewOpts.bg+';"><svg xmlns="http://www.w3.org/2000/svg" width="26" height="26"><g><path d="M.046 2.582L2.13.498l10.837 10.836L23.803.498l2.084 2.084-12.92 12.92z"/><path d="M.046 13.582l2.084-2.084 10.837 10.836 10.836-10.836 2.084 2.084-12.92 12.92z"/></g></svg></span>');if(n.append(H),H.on(clickEv,function(e){a.toggleClass("collapsed"),scaleLayoutFunc()}),$("body").append(a),$(document).on("newPage",function(e,t){viewOpts.page&&g.text(k()),multifile?y(nav.current):y(t.index+1)}),!touchEnabled)l.mousedown(function(e){e.preventDefault(),O=!0,C=e.pageX,x=$(this).scrollLeft()}),$(window).mousemove(function(e){if(O){var t=e.pageX;l.scrollLeft(x-t+C),i=!0,$("html").addClass("dragging")}}).mouseup(function(e){O&&(O=!1,setTimeout(function(){i=!1,$("html").removeClass("dragging")},1))})}function L(){l.toggle()}function k(){return nav.current+" / "+nav.numPages}function y(e){var t=e/nav.numPages;$progbar.css("width",100*t+"%")}});